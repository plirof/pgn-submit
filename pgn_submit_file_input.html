<!DOCTYPE html>
<html>
<head>
<!--

Changes:
-230416 -v008a -OK working lichess-import,download pgn
-230415a -v006a  added CDN datepicker (https://mymth.github.io/vanillajs-datepicker/#/overview)
-230413 -v005 Initial version OK Added white/black name option (based on pgnviewerjs edit.html)

-->

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>Some Games to Edit pgnviewerjs_edit_submit.html </title>
   <!-- <script src="../lib/dist.js" type="text/javascript"></script>-->
    <script src="dist.js" type="text/javascript"></script>


    <script src="pgn_get_file_from_url.js"></script>

    <!-- for date picker -->
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.1/dist/css/datepicker.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.1/dist/js/datepicker-full.min.js"></script>



 <!-- <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin">
 
 
  </script>

-->
<!--
  <script src="js/tinymce/tinymce.min.js" referrerpolicy="origin">

  </script>
  <script>tinymce.init({
  	selector:'textarea',
  	language: 'el',
    entity_encoding: "raw",
    height: "300",
    menubar: 'file edit view insert format tools table help',
    plugins: [
             "table","image", 
    ],    
    toolbar: 'undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | outdent indent |  numlist bullist | backcolor removeformat | forecolor | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | alignleft aligncenter alignright alignjustify | ltr rtl',
    table_toolbar : "" , //Disables the internal table popup toolbar
    browser_spellcheck : true, 
    //gecko_spellcheck : true, //deprecated
  //toolbar_sticky: true,
  //table_responsive_width: true,
  



	});
</script>
-->
  <script>

  function triggerSave(){

  	document.getElementById("board3Buttonpgn").click(); 

  	console.log("triggerSave");
  	///var pgndiv = document.getElementById('board3Moves');
  	var pgndiv = document.getElementById('textpgnboard3Button');
    //var pgntext = pgndiv.innerHTML;
    var pgntext = pgndiv.textContent;
    //var pgntext = pgndiv.innerHTML;
    console.log("pgntext ="+pgntext );
    //console.log("pgntext pgndiv.innerHTML ="+pgndiv.innerHTML  );
    //console.log("pgntext pgndiv.textContent ="+pgndiv.textContent  );
    var pgnelement = document.getElementById('hiddenpgntextarea');
    ///pgnelement.textContent = pgntext;
    pgnelement.textContent = pgntext;
    
    console.log("pgntextarea ="+pgnelement.value +" , .innerHTML"+pgnelement.innerHTML);

  }	

  function triggerPgnChange(){
  	console.log("triggerPgnChange()");
  	document.getElementById("board3Buttonpgn").click();
  }
</script>

</head>
<body  class='merida' >
  <!--
	<button onClick="triggerSave()" >aaaaaa</button>
	<button onClick="triggerPgnChange()" >triggerPgnChange</button>
-->
	<form action="handle-submit.php" method="post" onsubmit="triggerSave()">

		<div id="pgnpgn">
		<!-- <div id="board3" name="board3" onChange="triggerPgnChange()" style="width: 300px; float: left; margin-right: 25px">tttt</div> -->
		<div id="board3" name="board3" style="width: 400px; float: left; margin-right: 25px"></div>
	  </div>
		<!--<textarea id="hiddenpgntextarea" name="hiddenpgntextarea"></textarea> -->
		<textarea id="hiddenpgntextarea" name="hiddenpgntextarea" hidden></textarea>
		<!-- textpgnboard3Button-->
		<textarea name="text_entered" id="text_entered" hidden ></textarea>
		<!-----<div id="div-submit" >-------------------------div-submit -->
		<br><label for="name">Event name :</label>
		<input type="text" id="Event" name="Event" size=15>
    <br>Date (YYYY.MM.DD):<input type="text" name="date" id="date" class="input date">
    <br>Site: <input type="text" id="site" name="site" size=15>
		<br>White name <input type="text" id="white_name" name="white_name" size=15>
		<br>Black name <input type="text" id="black_name" name="black_name" size=15>
		<br>
    <br> Round:
		<select name="round" id="round">
			<option value="?">?</option>
      <option value="1">1</option>
			<option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
		</select>
    <br> Result:
    <select name="result" id="result">
      <option value="?">?</option>
      <option value="1/2-1/2">1/2-1/2</option>
      <option value="1-0">1-0</option>
      <option value="0-1">0-1</option>
    </select>
    <br>White ELO <input type="text" id="white_elo" name="white_elo" size=15>
    <br>Black ELO <input type="text" id="black_elo" name="black_elo" size=15>
		<br>
		<br>
		<input type="submit" value="ΥΠΟΒΟΛΗ"> 
		<!-----</div>---------------------------------------div-submit -->
	</form>
  <hr>
  <p onselectstart="return false" onpaste="return false;" onCopy="return false" onCut="return false" onDrag="return false" onDrop="return false" >
  <!-- <div id="probeserver" onselectstart="return false" onpaste="return false;" onCopy="return false" onCut="return false" onDrag="return false" onDrop="return false" ></div> -->
      <BR>____________
</p>

Notes Jon:
board3Moves : Here we store the moves < d i v id="board3Moves" class="moves inline"></ d i v >

<!-- FUNCTIONS #################### -->
<script>
//    var pgn = "1. e4 e5 2. Nf3 Nc6  3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5 6.d4 exd4 7.O-O d3 8.Qb3 Qf6 9.e5 Qg6 10.Re1 Nge7 11.Ba3 b5 12.Qxb5 Rb8 13.Qa4 Bb6 14.Nbd2 Bb7 15.Ne4 Qf5 16.Bxd3 Qh5 { now the whole idea unfolds } 17.Nf6+ gxf6 18.exf6 Rg8 19.Rad1 Qxf3 (19... Rxg2 20. Kxg2 Ne5 { does not work }) 20.Rxe7+ Nxe7 21.Qxd7+ Kxd7 22.Bf5+ Ke8 23.Bd7+ Kf8 24. Bxe7#";
    /*
    var pgn1 = "{Start comment} 1. e4 e5 2. Nf3 Nc6 3. Bc4 Bc5 4. b4 Bxb4 5. c3 Ba5 6. d4 exd4 7. O-O d3 8. Qb3 Qf6 9. e5 Qg6 10. Re1 Nge7 11. Ba3 b5 12. Qxb5 Rb8 13. Qa4 Bb6 14. Nbd2 Bb7 15. Ne4 Qf5 16. Bxd3 Qh5 {now the whole idea unfolds} 17. Nf6+ gxf6 18. exf6 Rg8 19. Rad1 Qxf3 20. Rxe7+ Nxe7 21. Qxd7+ Kxd7 22. Bf5+ Ke8 23. Bd7+ Kf8 24. Bxe7# 1-0";
    pgnv = PGNV.pgnEdit("board1", {pgn: pgn1, position: "start", orientation: 'black', locale: 'en'});
    pgnv = PGNV.pgnEdit("board2", {pgn: '4.Ng5 Bc5 5.O-O h6 6.Nxf7', position: "r1bqkb1r/pppp1ppp/2n2n2/4p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 0 5", orientation: 'black', locale: 'de' }); */
    //var pgnv = PGNV.pgnEdit("board3", {pgn: '', position: "r1bqk2r/pppp1Npp/2n2n2/4p3/2B1P3/8/PPPP1bPP/RNBQ1K1R b kq - 1 6", orientation: 'black', locale: 'fr'});
    /// var pgnv = PGNV.pgnEdit("board3", {pgn: '', position: "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1", orientation: 'white', locale: 'en'}); //OK Correct
    var pgnv;
    if (typeof pgn_contents === 'undefined' || pgn_contents === null) {
        // variable is undefined or null then empty board
        console.log("pgn_contents === 'undefined' ");
        pgnv = PGNV.pgnEdit("board3", {pgn: '', position: "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1", orientation: 'white', locale: 'en'});
    } else {
        pgnv = PGNV.pgnEdit("board3", {pgn: pgn_contents, position: "", orientation: 'white', locale: 'en'});
        console.log("pgn_contents === defined "+pgn_contents );
    }

</script>

<!-- <script src="tinymce_lesson_js_footer.js" type="text/javascript"></script> -->


 

<script type="text/javascript">
  var date = new Date(); 
  var dd = date.getDate(); 
  var mm = date.getMonth() + 1; 
  var yyyy = date.getFullYear(); 
  var newDate = yyyy+"."+mm+"."+dd ; 
  var p = document.getElementById("date"); 
  console.log(newDate);
  p.value = newDate; 
</script>



<script>
      //Datepicker -230415a  CDN datepicker (https://mymth.github.io/vanillajs-datepicker/#/overview)
      /*global initialize onChangeType onChnageDirection onChangeInputOption onChangeInputOption onChangeTextareaOption onClickCheckboxOptions switchPicker */
    const elem = document.querySelector('input[name="date"]');
    const datepicker = new Datepicker(elem, {
    // ...options
    format:'yyyy.mm.dd',
  }); 
</script>



</body>
</html>